<ngx-spinner>
    <p class="text-white">Espere un momento...</p>
</ngx-spinner>
<form #formDocumental="ngForm">
<div class="p-2">
    <div class="row mb-3">
        <div class="col-12 col-md-6">
            <label class="form-label">Tipo documento digital </label>
            <select class="form-select" name="codtipodocumento" [(ngModel)]="payload.codtipodocumento" required>
                <option value="1">Documentos Jurídicos</option>
            </select>
        </div>
        <div class="col-12 col-md-6">
            <label class="form-label">Tipo documento jurídico </label>
            <select class="form-select" name="codtipodocumentojuridico" [(ngModel)]="payload.codtipodocumentojuridico"
                required>
                <option *ngFor="let item of documentosJuridico" [value]="item.codtipodocumentojuridico">
                    {{item.descripcion}}</option>
            </select>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-12 col-md-6">
            <label class="form-label">Fecha</label>
            <div class="input-group">
                <span class="input-group-text"><i class="far fa-calendar"></i></span>
                <input type="text" class="form-control" [(ngModel)]="fechaaux" name="fecha" required
                    #fecha="ngModel" [class.is-invalid]="fecha.invalid && (fecha.dirty || fecha.touched)"
                    [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' }" bsDatepicker>
                <div class="invalid-feedback">La fecha es requerida</div>
            </div>
        </div>
        <div class="col-12 col-md-6">
            <label class="form-label">Lugar</label>
            <input class="form-control" name="lugar" [(ngModel)]="payload.lugar" />
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-12">
            <label class="form-label">Descripción</label>
            <textarea class="form-control" rows="3" [(ngModel)]="payload.descripcion" name="descripcion"></textarea>
        </div>
    </div>
    <div class="form-check mb-5">
        <input class="form-check-input" type="checkbox" name="docinscrito" id="docinscrito"
            [(ngModel)]="payload.docinscrito">
        <label class="form-check-label" for="docinscrito">
            Documento Inscrito
        </label>
    </div>
    <ng-container *ngIf="payload.docinscrito">
        <div class="row mb-3">
            <div class="col-12 col-md-6">
                <label class="form-label me-4">Antecedente</label><br>
                <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input" type="radio" name="esantecedente"
                        [(ngModel)]="payload.rppc.esantecedente" id="esantecedentes" value="S">
                    <label class="form-check-label" for="esantecedentes">Si</label>
                </div>
                <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input" type="radio" name="esantecedente"
                        [(ngModel)]="payload.rppc.esantecedente" id="esantecedenten" value="N">
                    <label class="form-check-label" for="esantecedenten">No</label>
                </div>
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label">Fecha inscripción</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="far fa-calendar"></i></span>
                    <input type="text" class="form-control" [(ngModel)]="fechaInscripcion"
                        name="fechainscripcion" #fechainscripcion="ngModel"
                        [class.is-invalid]="fechainscripcion.invalid && (fechainscripcion.dirty || fechainscripcion.touched)"
                        [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' }" bsDatepicker>
                    <div class="invalid-feedback">La fecha es requerida</div>
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-12 col-md-6">
                <label class="form-label me-4">Confrontada</label><br>
                <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input" type="radio" name="confrontado"
                        [(ngModel)]="payload.rppc.confrontado" id="confrontados" value="S">
                    <label class="form-check-label" for="confrontados">Si</label>
                </div>
                <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input" type="radio" name="confrontado"
                        [(ngModel)]="payload.rppc.confrontado" id="confrontadon" value="N">
                    <label class="form-check-label" for="confrontadon">No</label>
                </div>
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label">Fecha confronta</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="far fa-calendar"></i></span>
                    <input type="text" class="form-control" [(ngModel)]="fechaConfronta"
                        name="fechaconfronta" #fechaconfronta="ngModel"
                        [class.is-invalid]="fechaconfronta.invalid && (fechaconfronta.dirty || fechaconfronta.touched)"
                        [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' }" bsDatepicker>
                    <div class="invalid-feedback">La fecha es requerida</div>
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-12 col-md-6">
                <label class="form-label">Folio real</label>
                <input class="form-control" name="folioreal" [(ngModel)]="payload.rppc.folioreal" />
            </div>

        </div>
        <div class="row mb-3">
            <div class="col-12 col-md-6">
                <label class="form-label">Libro</label>
                <input class="form-control" name="libro" [(ngModel)]="payload.rppc.libro" />
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label">Sección</label>
                <input class="form-control" name="seccion" [(ngModel)]="payload.rppc.seccion" />
            </div>

        </div>
        <div class="row mb-3">
            <div class="col-12 col-md-6">
                <label class="form-label">Volumen</label>
                <input class="form-control" name="volumen" [(ngModel)]="payload.rppc.volumen" />
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label">Tomo</label>
                <input class="form-control" name="tomo" [(ngModel)]="payload.rppc.tomo" />
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-12 col-md-6">
                <label class="form-label">Foja</label>
                <input class="form-control" name="foja" [(ngModel)]="payload.rppc.foja" />
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label">Partida</label>
                <input class="form-control" name="partida" [(ngModel)]="payload.rppc.partida" />
            </div>
        </div>
        
    </ng-container>
    <div class="mb-3">
        <label class="form-label">Archivo</label>
        <input class="form-control" type="file"
            [(ngModel)]="file" (change)="addFile($event)"
            name="archivo" #archivo="ngModel">
    </div>
    <div class="table-responsive" *ngIf="ficheros.length > 0">
        <table class="table table-stripped">
            <thead>
                <th>Archivo</th>
                <th></th>
            </thead>
            <tbody>
                <tr *ngFor="let fichero of ficheros; let i = index">
                    <td>{{fichero.nombre}}</td>
                    <td><button class="btn btn-sm btn-danger" (click)="removeFile(i)"><i class="fa fa-trash" aria-hidden="true"></i>
                    </button></td>
                </tr>
            </tbody>
        </table>

    </div>
    <div class="d-flex flex-row-reverse">
        <button class="btn btn-cdmx-primary" (click)="guardarArchivos()" [disabled]="formDocumental.invalid">Guardar archivos <i class="fa fa-upload" aria-hidden="true"></i>
        </button>
    </div>
</div>
</form>